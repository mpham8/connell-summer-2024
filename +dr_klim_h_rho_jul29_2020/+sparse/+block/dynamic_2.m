function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(12, 1);
  y(30)=params(9)*y(23);
  T(1)=y(19)^(-params(3));
  T(2)=(1+x(3))^(-1);
  T(3)=y(35)^(-params(3));
  residual(1)=(T(1))-(T(2)*(1+y(20))*T(3));
  residual(2)=(y(27))-(y(38)*T(2)*(y(20)-params(7)));
  residual(3)=(y(28))-(max(0,y(28)-y(27)));
  T(4)=x(1)*y(7)^params(1);
  T(5)=y(10)^params(2);
  residual(4)=(y(17))-(T(4)*T(5));
  T(6)=y(23)^(params(1)-1);
  T(7)=y(26)^params(2);
  T(8)=params(5)/2;
  T(9)=params(4)^2;
  T(10)=1-params(4)+T(8)*((y(37)/y(23))^2-T(9));
  T(11)=T(6)*params(1)*T(3)*(1-x(2))*y(48);
  residual(5)=(y(22))-(params(9)*y(27)+T(2)*(y(38)*T(10)+T(7)*T(11)));
  T(12)=T(8)*(y(24)/y(10)-params(4))^2;
  residual(6)=(y(26))-(y(24)+y(10)*(1-params(4))-y(10)*T(12));
  residual(7)=(y(28))-(y(30)-y(18));
  residual(8)=(y(18))-(y(2)+y(2)*params(7)+y(19)+y(21)+y(24)+y(17)*params(6)-y(17)-x(4));
  residual(9)=(y(21))-(y(7)*params(4)+1/params(5)*(1-T(1)/y(22)));
  T(13)=T(8)*(y(21)/y(7)-params(4))^2;
  residual(10)=(y(23))-(y(21)+y(7)*(1-params(4))-y(7)*T(13));
  residual(11)=(y(24))-(y(10)*params(4)+1/params(5)*(1-T(1)/y(25)));
  T(14)=y(23)^params(1);
  T(15)=y(26)^(params(2)-1);
  T(16)=1-params(4)+T(8)*((y(40)/y(26))^2-T(9));
  T(17)=T(14)*params(2)*T(3)*(1-x(2))*y(48);
  residual(12)=(y(25))-(T(2)*(y(41)*T(16)+T(15)*T(17)));
  T(18)=getPowerDeriv(y(19),(-params(3)),1);
  T(19)=getPowerDeriv(y(35),(-params(3)),1);
if nargout > 3
    g1_v = NaN(47, 1);
g1_v(1)=(-(T(5)*x(1)*getPowerDeriv(y(7),params(1),1)));
g1_v(2)=(-params(4));
g1_v(3)=(-(1-params(4)-(T(13)+y(7)*T(8)*2*(y(21)/y(7)-params(4))*(-y(21))/(y(7)*y(7)))));
g1_v(4)=(-(T(4)*getPowerDeriv(y(10),params(2),1)));
g1_v(5)=(-(1-params(4)-(T(12)+y(10)*T(8)*2*(y(24)/y(10)-params(4))*(-y(24))/(y(10)*y(10)))));
g1_v(6)=(-params(4));
g1_v(7)=(-(1+params(7)));
g1_v(8)=(-(T(2)*T(3)));
g1_v(9)=(-(T(2)*y(38)));
g1_v(10)=1;
g1_v(11)=1-(0>y(28)-y(27));
g1_v(12)=(-params(9));
g1_v(13)=1-(1-(0>y(28)-y(27)));
g1_v(14)=1;
g1_v(15)=1;
g1_v(16)=(-(params(6)-1));
g1_v(17)=(-(T(2)*(y(38)*T(8)*2*y(37)/y(23)*(-y(37))/(y(23)*y(23))+T(7)*params(1)*T(3)*(1-x(2))*y(48)*getPowerDeriv(y(23),params(1)-1,1))));
g1_v(18)=(-params(9));
g1_v(19)=1;
g1_v(20)=(-(T(2)*T(15)*params(2)*T(3)*(1-x(2))*y(48)*getPowerDeriv(y(23),params(1),1)));
g1_v(21)=(-(T(2)*T(11)*getPowerDeriv(y(26),params(2),1)));
g1_v(22)=1;
g1_v(23)=(-(T(2)*(y(41)*T(8)*2*y(40)/y(26)*(-y(40))/(y(26)*y(26))+T(17)*getPowerDeriv(y(26),params(2)-1,1))));
g1_v(24)=1;
g1_v(25)=1;
g1_v(26)=(-(1-y(10)*T(8)*1/y(10)*2*(y(24)/y(10)-params(4))));
g1_v(27)=(-1);
g1_v(28)=1;
g1_v(29)=1;
g1_v(30)=(-(1/params(5)*(-((-T(1))/(y(22)*y(22))))));
g1_v(31)=(-1);
g1_v(32)=1;
g1_v(33)=(-(1-y(7)*T(8)*1/y(7)*2*(y(21)/y(7)-params(4))));
g1_v(34)=T(18);
g1_v(35)=(-1);
g1_v(36)=(-(1/params(5)*(-(T(18)/y(22)))));
g1_v(37)=(-(1/params(5)*(-(T(18)/y(25)))));
g1_v(38)=(-(1/params(5)*(-((-T(1))/(y(25)*y(25))))));
g1_v(39)=1;
g1_v(40)=(-(T(2)*y(41)*T(8)*1/y(26)*2*y(40)/y(26)));
g1_v(41)=(-(T(2)*(y(20)-params(7))));
g1_v(42)=(-(T(2)*T(10)));
g1_v(43)=(-(T(2)*y(38)*T(8)*1/y(23)*2*y(37)/y(23)));
g1_v(44)=(-(T(2)*(1+y(20))*T(19)));
g1_v(45)=(-(T(2)*T(7)*T(6)*y(48)*params(1)*(1-x(2))*T(19)));
g1_v(46)=(-(T(2)*T(15)*T(14)*y(48)*params(2)*(1-x(2))*T(19)));
g1_v(47)=(-(T(2)*T(16)));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 12, 36);
end
end
